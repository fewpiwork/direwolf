package direwolf

import (
	"net/http"
	"net/url"
)

// RequestSetting is a prepared RequestSetting that generated by prepareRequestSetting().
// It came from your input in RequestSetting.
type RequestSetting struct {
	Method      string
	URL         string
	Headers     http.Header
	Data        Data
	DataForm    url.Values
	Params      url.Values
	Cookies     []*http.Cookie
	Proxy       string
	RedirectNum int
	Timeout     int
}

// setHeader get the key-value from Headers to RequestSetting.Headers.
func (req *RequestSetting) setHeader(h Headers) {
	req.Headers = http.Header{}
	for key, slice := range h {
		for _, value := range slice {
			req.Headers.Add(key, value)
		}
	}
}

// setParams set RequestSetting.Params.Encode Params and join it to url.
func (req *RequestSetting) setParams(p Params) {
	req.Params = url.Values(p)
	req.URL = req.URL + "?" + req.Params.Encode() // add params to url
}

// setCookies set RequestSetting.Cookies
func (req *RequestSetting) setCookies(c Cookies) {
	req.Cookies = []*http.Cookie{}
	for key, value := range c {
		req.Cookies = append(req.Cookies, &http.Cookie{Name: key, Value: value})
	}
}

// NewRequestSetting new a default RequestSetting
func NewRequestSetting() {

}
