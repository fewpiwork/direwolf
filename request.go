package direwolf

import (
	"net/http"
	"net/url"
)

// Request is a prepared request that generated by prepareRequest().
// It came from your input in Request.
type Request struct {
	Method      string
	URL         string
	Headers     http.Header
	Data        Data
	DataForm    url.Values
	Params      url.Values
	Cookies     []*http.Cookie
	Proxy       string
	RedirectNum int
	Timeout     int
}

// setHeader get the key-value from Headers to Request.Headers.
func (req *Request) setHeader(h Headers) {
	req.Headers = http.Header{}
	for key, slice := range h {
		for _, value := range slice {
			req.Headers.Add(key, value)
		}
	}
}

// setParams set Request.Params.Encode Params and join it to url.
func (req *Request) setParams(p Params) {
	req.Params = url.Values(p)
	req.URL = req.URL + "?" + req.Params.Encode() // add params to url
}

// setCookies set Request.Cookies
func (req *Request) setCookies(c Cookies) {
	req.Cookies = []*http.Cookie{}
	for key, value := range c {
		req.Cookies = append(req.Cookies, &http.Cookie{Name: key, Value: value})
	}
}
